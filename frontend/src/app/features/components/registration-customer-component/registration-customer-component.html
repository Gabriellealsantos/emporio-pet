<div class="login-container">
  <div class="login-card register-card">
    <div class="title">
      <img src="assets/icons/dog.svg" class="title-icon" alt="Ícone de cachorro" />
      <h2 class="title-text">Criar Conta</h2>
    </div>

    <form class="login-form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <img src="assets/icons/user.svg" alt="Ícone de usuário" />
        <input type="text" id="name" placeholder="Nome completo" required formControlName="name" />
      </div>
      @if (form.controls['name'].invalid && (form.controls['name'].dirty || form.controls['name'].touched)) {
        <div class="error-container">
          @if (form.controls['name'].errors?.['required']) {
            <small class="error-message">Nome completo é obrigatório.</small>
          }
          @if (form.controls['name'].errors?.['minlength']) {
            <small class="error-message">O nome deve ter no mínimo 3 caracteres.</small>
          }
          @if (form.controls['name'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['name'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/mail.svg" alt="Ícone de email" />
        <input type="email" id="email" placeholder="Digite seu email" required formControlName="email" />
      </div>
      @if (form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)) {
        <div class="error-container">
          @if (form.controls['email'].errors?.['required']) {
            <small class="error-message">Email é obrigatório.</small>
          }
          @if (form.controls['email'].errors?.['email']) {
            <small class="error-message">Por favor, insira um email válido.</small>
          }
          @if (form.controls['email'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['email'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/lock.svg" alt="Ícone de cadeado" />
        <input type="password" id="password" placeholder="Crie uma senha" required formControlName="password" />
      </div>
      @if (form.controls['password'].invalid && (form.controls['password'].dirty || form.controls['password'].touched)) {
        <div class="error-container">
          @if (form.controls['password'].errors?.['required']) {
            <small class="error-message">Senha é obrigatória.</small>
          }
          @if (form.controls['password'].errors?.['minlength']) {
            <small class="error-message">A senha deve ter no mínimo 8 caracteres.</small>
          }
          @if (form.controls['password'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['password'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/lock.svg" alt="Ícone de cadeado" />
        <input type="password" id="confirmPassword" placeholder="Confirme sua senha" required formControlName="confirmPassword" />
      </div>
      @if (form.controls['confirmPassword'].invalid && (form.controls['confirmPassword'].dirty || form.controls['confirmPassword'].touched) || form.hasError('passwordsMismatch')) {
        <div class="error-container">
          @if (form.controls['confirmPassword'].errors?.['required']) {
            <small class="error-message">Confirmação de senha é obrigatória.</small>
          }
          @if (form.hasError('passwordsMismatch') && form.controls['confirmPassword'].dirty) {
            <small class="error-message">As senhas não conferem.</small>
          }
          @if (form.controls['confirmPassword'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['confirmPassword'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/phone.svg" alt="Ícone de telefone" />
        <input type="tel" id="phone" placeholder="Celular (com DDD)" required formControlName="phone" mask="(00) 00000-0000" />
      </div>
      @if (form.controls['phone'].invalid && (form.controls['phone'].dirty || form.controls['phone'].touched)) {
        <div class="error-container">
          @if (form.controls['phone'].errors?.['required']) {
            <small class="error-message">Celular é obrigatório.</small>
          }
          @if (form.controls['phone'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['phone'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/document.svg" alt="Ícone de documento" />
        <input type="text" id="cpf" placeholder="CPF" required formControlName="cpf" mask="000.000.000-00" />
      </div>
      @if (form.controls['cpf'].invalid && (form.controls['cpf'].dirty || form.controls['cpf'].touched)) {
        <div class="error-container">
          @if (form.controls['cpf'].errors?.['required']) {
            <small class="error-message">CPF é obrigatório.</small>
          }
          @if (form.controls['cpf'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['cpf'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <div class="form-group">
        <img src="assets/icons/calendar.svg" alt="Ícone de calendário" />
        <input type="date" id="birthDate" placeholder="Data de Nascimento" required formControlName="birthDate" />
      </div>
      @if (form.controls['birthDate'].invalid && (form.controls['birthDate'].dirty || form.controls['birthDate'].touched)) {
        <div class="error-container">
          @if (form.controls['birthDate'].errors?.['required']) {
            <small class="error-message">Data de nascimento é obrigatória.</small>
          }
          @if (form.controls['birthDate'].errors?.['futureDate']) {
            <small class="error-message">A data não pode ser no futuro.</small>
          }
          @if (form.controls['birthDate'].errors?.['backendError']) {
            <small class="error-message">{{ form.controls['birthDate'].errors?.['backendError'] }}</small>
          }
        </div>
      }

      <emp-button type="submit" [fullWidth]="true">Cadastrar</emp-button>

      <div class="extra-links" style="justify-content: center; margin-top: 16px">
        <a href="/login">Já tem uma conta? Entre</a>
      </div>
    </form>
  </div>
</div>
