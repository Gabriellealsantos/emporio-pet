@if (currentUser(); as user) {
  <div class="container mx-auto px-4 py-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-800">Olá, {{ user.name.split(' ')[0] }}!</h1>
      <p class="text-gray-600">Bem-vindo(a) à sua área do cliente.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2 space-y-8">
        <a routerLink="/customer/agendar" class="block text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition duration-200">
          <fa-icon [icon]="faCalendarPlus" class="mr-2"></fa-icon>
          Agendar um Novo Serviço
        </a>

        <div class="bg-white rounded-lg shadow p-6">
          <h2 class="text-xl font-semibold text-gray-700 mb-4">Próximos Agendamentos</h2>
          @if (isLoading()) {
            <p class="text-gray-500">Carregando agendamentos...</p>
          } @else {
            <div class="space-y-4">
              @for (app of upcomingAppointments(); track app.id) {
                <div class="p-4 border rounded-md flex justify-between items-center">
                  <div>
                    <p class="font-semibold text-gray-800">{{ app.service.name }}</p>
                    <p class="text-sm text-gray-600">Para {{ app.pet.name }}</p>
                  </div>
                  <div class="text-right">
                    <p class="text-sm font-medium text-gray-800">{{ app.startDateTime | date:'dd/MM/yyyy' }}</p>
                    <p class="text-sm text-gray-500">{{ app.startDateTime | date:'HH:mm' }}</p>
                  </div>
                </div>
              } @empty {
                <p class="text-gray-500 text-center py-4">Você não tem agendamentos futuros.</p>
              }
            </div>
          }
        </div>
      </div>

      <div class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Meus Pets</h2>
        <div class="space-y-3">
          @if (user.pets && user.pets.length > 0) {
            @for (pet of user.pets; track pet.id) {
              <div class="flex items-center p-3 border rounded-md hover:bg-gray-50">
                <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center mr-3">
                  <fa-icon [icon]="faPaw" class="text-indigo-500"></fa-icon>
                </div>
                <div>
                  <p class="font-medium text-gray-800">{{ pet.name }}</p>
                  <p class="text-sm text-gray-500">{{ pet.breed.name }}</p>
                </div>
              </div>
            }
          } @else {
            <p class="text-sm text-gray-500">Nenhum pet cadastrado.</p>
          }
        </div>
        <button routerLink="/customer/meus-pets" class="w-full mt-4 text-sm text-blue-600 font-semibold hover:underline">
          Gerenciar Meus Pets
        </button>
      </div>
    </div>
  </div>
}
